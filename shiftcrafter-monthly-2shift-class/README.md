# ShiftCrafter Part 6 (Class-Based)

多機能シフト作成ツール **ShiftCrafter Class-Based** バージョンです。
スタッフのスキルクラス管理、詳細な勤務希望、平日/休日の人数設定に対応しています。

## ディレクトリ構成
- `index.html`: 日本語版ツール
- `index_en.html`: 英語版ツール

## 主な新機能

### 1. スタッフのクラス・属性管理
スタッフ名に `:A` や `:S` を付けることで、スキルレベルや属性を区別できます。

書式: `名前:クラス:属性`

- **クラス**: A (リーダー格) または B (一般)。省略時はB。
  - Aクラスは、日勤・夜勤それぞれに設定した「最低配置人数」を満たすように優先配置されます。
- **属性**: S (時短/Short)
  - S属性を付けたスタッフは「時短用 夜勤上限回数」の設定が適用されます。
  - **夜勤に入れたくないスタッフ**には `:S` を付け、設定画面で「月あたり夜勤上限 (時短S)」を `0` に設定してください。

例:
```
田中:A       (リーダー、通常)
鈴木:B       (一般、通常)
佐藤:B:S     (一般、時短)
```

### 2. 詳細な希望入力
従来の「休み希望」に加え、以下の指定が可能です。
- **休** (Off): 休み希望
- **日** (Day): 日勤希望
- **夜** (Night): 夜勤希望
- **×夜** (NoNight): 夜勤不可（日勤または休みは可）

例:
```
2025-11-03 田中 休
2025-11-05 鈴木 夜
2025-11-10 佐藤 ×夜
```

### 3. 平日/休日の必要人数設定
日勤の必要人数を「平日」と「休日（土日祝）」で個別に設定できます。
これにより、「平日は手厚く、休日は少なめ」といった運用が可能になります。
※土日は自動判定されます。祝日は別途リスト入力で指定可能です。

### 4. マトリクスCSV出力
CSVのエクスポート形式が、縦にスタッフ、横に日付のカレンダー（マトリクス）形式に変更されました。
印刷やExcelでの二次加工に最適です。

### 5. 各種上限設定
- **月あたり夜勤上限 (通常)**: 多くのスタッフに適用されます。
- **月あたり夜勤上限 (時短S)**: `:S` 属性が付いたスタッフにのみ適用されます。夜勤免除したい場合は `0` に設定します。
- (週あたりの夜勤上限設定は廃止されました)

### 6. 休み日数の自動計算・制限
その月の**土日・祝日の数**に基づいて、スタッフ一人ひとりの「あるべき休みの日数」が自動計算されます。
シフト作成時に、この日数以上の公休が確保されるように（勤務日数が上限を超えないように）調整されます。

### 7. 検証レポート機能
「検証レポート」ボタンを押すと、以下の内容を確認できます。
- 希望通りにならなかったシフト（未達成リスト）
- スタッフごとの総勤務日数が適正か（上限を超えていないか）のチェック結果

---
[ShiftCrafter Top](../README.md)
